# configuration file for the setup for integration testing: inl-csu-usc-nrel
# Test with acs-rtds (nrel), acs-opal1 (csu), acs-opal2 (usc)
#
# host: inl-villas
# inl devices: inl-rtds73, inl-rtds74, inl-rtds83, inl-rtds84
# remote nodes: csu-villas, usc-villas, nrel-rtds, acs-villas
#

stats = 5.0;

hugepages = 1000;

############     nodes    ############

nodes = {

# Labs
	acs-villasA = {
		type = "socket",
		layer = "udp",
		local = "*:13002",
		remote = "10.10.15.1:13002"
		hooks = ( { type = "stats"} )
	},

	acs-villasB = {
		type = "socket",
		layer = "udp",
		local = "*:13022",
		remote = "10.10.15.1:13022"
		hooks = ( { type = "stats"} )
	},

	usc-villas = {
		type = "socket",
		layer = "udp",
		local = "*:13077",
		remote = "129.252.22.104:13078",
		hooks = ( { type = "stats" } )
	},

	wsu-villas = {
		type = "socket",
		layer = "udp",
		local = "*:13008",
		remote = "141.221.118.93:13008"
		hooks = ( { type = "stats"} )
	},

	polito-villas = {
		type = "socket",
		layer = "udp",
		local = "*:13003",
		remote = "141.221.118.93:13001"
		hooks = ( { type = "stats"} )
	},

	snl-villas = {
		type = "socket",
		layer = "udp",
		local = "*:13006",
		remote = "141.221.118.93:13006"
		hooks = ( { type = "stats"} )
	},

	csu-villas = {
		type = "socket",
		layer = "udp",
		local = "*:13004",
		remote = "141.221.118.93:13004"
		hooks = ( { type = "stats"} )
	}

	nrel-villas = {
		type = "socket",
		layer = "udp",
		local = "*:13005",
		remote = "141.221.118.93:13001",
		hooks = ( { type = "stats"} )
	}

	inl-rtds73 = {
		type = "socket",
		layer = "udp",
		local = "*:13073",
		remote = "141.221.118.95:13073",
		hooks = ( { type = "stats"} )
	}

	inl-rtds74 = {
		type = "socket",
		layer = "udp",
		local = "*:13074",
		remote = "141.221.118.95:13074",
		hooks = ( { type = "stats"} )
	}

	inl-rtds83 = {
		type = "socket",
		layer = "udp",
		local = "*:13083",
		remote = "141.221.118.95:13083",
		hooks = ( { type = "stats"} )
	}

	inl-rtds84 = {
		type = "socket",
		layer = "udp",
		local = "*:13084",
		remote = "141.221.118.95:13084",
		hooks = ( { type = "stats"} )
	}


# WS endpoints
	nrel-villas_ws   = { type = "websocket" },
	acs-villasA_ws    = { type = "websocket" },
	acs-villasB_ws    = { type = "websocket" },
	csu-villas_ws    = { type = "websocket" },
	wsu-villas_ws    = { type = "websocket" },
	usc-villas_ws    = { type = "websocket" }
	snl-villas_ws    = { type = "websocket" },
	polito-villas_ws = { type = "websocket" },

	inl-rtds73_ws = { type = "websocket" },
	inl-rtds74_ws = { type = "websocket" },
	inl-rtds83_ws = { type = "websocket" },
	inl-rtds84_ws = { type = "websocket" },

	nrel-villas_file = {
		type = "file",
		uri = "/rtsuperlab/nrel-villas_%Y%m%d_%H-%M-%S.csv", # start the file name with ssN (id of subsystem that DRTS in your labsimulates)
	},
	acs-villasA_file = {
		type = "file",
		uri = "/rtsuperlab/acs-villasA_%Y%m%d_%H-%M-%S.csv", # start the file name with ssN (id of subsystem that DRTS in your labsimulates)
	},
	acs-villasB_file = {
		type = "file",
		uri = "/rtsuperlab/acs-villasB_%Y%m%d_%H-%M-%S.csv", # start the file name with ssN (id of subsystem that DRTS in your labsimulates)
	},
	csu-villas_file = {
		type = "file",
		uri = "/rtsuperlab/csu-villas_%Y%m%d_%H-%M-%S.csv", # start the file name with ssN (id of subsystem that DRTS in your labsimulates)
	},
	wsu-villas_file = {
		type = "file",
		uri = "/rtsuperlab/wsu-villas_%Y%m%d_%H-%M-%S.csv", # start the file name with ssN (id of subsystem that DRTS in your labsimulates)
	},
	usc-villas_file = {
		type = "file",
		uri = "/rtsuperlab/usc-villas_%Y%m%d_%H-%M-%S.csv", # start the file name with ssN (id of subsystem that DRTS in your labsimulates)
	},
	snl-villas_file = {
		type = "file",
		uri = "/rtsuperlab/snl-villas_%Y%m%d_%H-%M-%S.csv", # start the file name with ssN (id of subsystem that DRTS in your labsimulates)
	},
	polito-villas_file = {
		type = "file",
		uri = "/rtsuperlab/polito-villas_%Y%m%d_%H-%M-%S.csv", # start the file name with ssN (id of subsystem that DRTS in your labsimulates)
	},

	inl-rtds73_file = {
		type = "file",
		uri = "/rtsuperlab/inl-rtds73_%Y%m%d_%H-%M-%S.csv", # start the file name with ssN (id of subsystem that DRTS in your labsimulates)
	},
	inl-rtds74_file = {
		type = "file",
		uri = "/rtsuperlab/inl-rtds74_%Y%m%d_%H-%M-%S.csv", # start the file name with ssN (id of subsystem that DRTS in your labsimulates)
	},
	inl-rtds83_file = {
		type = "file",
		uri = "/rtsuperlab/inl-rtds83_%Y%m%d_%H-%M-%S.csv", # start the file name with ssN (id of subsystem that DRTS in your labsimulates)
	},
	inl-rtds84_file = {
		type = "file",
		uri = "/rtsuperlab/inl-rtds84_%Y%m%d_%H-%M-%S.csv", # start the file name with ssN (id of subsystem that DRTS in your labsimulates)
	},

	sig = {
		type = "signal",

		signal = "mixed",
		values = 5,
		rate = 20,
		hooks = (
			{ type = "stats" }
		)
	},
	sig_ws = {
		type = "websocket"
	}
};

############       paths       ############

paths = (
	# We receive sample data from each lab and send it to the web
	{ in = "acs-villasA",    out = ["acs-villasA_ws", "acs-villasA_file"] },
	{ in = "acs-villasB",    out = ["acs-villasB_ws", "acs-villasB_file"] },
	{ in = "csu-villas",    out = ["csu-villas_ws", "csu-villas_file"] },
	{ in = "wsu-villas",    out = ["wsu-villas_ws", "wsu-villas_file"] },
	{ in = "usc-villas",    out = ["usc-villas_ws", "usc-villas_file"] },
	{ in = "snl-villas",    out = ["snl-villas_ws", "snl-villas_file"] },
	{ in = "polito-villas", out = ["polito-villas_ws", "polito-villas_file"] },
	{ in = "nrel-villas",   out = ["nrel-villas_ws", "nrel-villas_file"] },

	{ in = "inl-rtds73",    out = ["inl-rtds73_ws", "inl-rtds73_file"] },
	{ in = "inl-rtds74",    out = ["inl-rtds74_ws", "inl-rtds74_file"] },
	{ in = "inl-rtds83",    out = ["inl-rtds83_ws", "inl-rtds83_file"] },
	{ in = "inl-rtds84",    out = ["inl-rtds84_ws", "inl-rtds84_file"] },

	{ in = "sig", out = "sig_ws" }
);
